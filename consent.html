<script>
/**
 * Cookie Consent + Pluggable Trackers (production ready with GA Ads ID)
 */
(function () {
  var BRAND_PRIMARY = '#E65100';   // EmailFinder primary
  var BRAND_SECONDARY = '#FF9800'; // EmailFinder secondary
  var KEY = 'cookieConsent';
  var config = {
    policyUrl: '/cookie-policy.html'
  };

  // ---------- Core ----------
  var hasActivatedScripts = false;

  function activateAnalyticsScripts() {
    if (hasActivatedScripts) return;
    hasActivatedScripts = true;

    function startActivation() {
      var deferredScripts = document.querySelectorAll('script[type="text/plain"][data-category="analytics"]');

      Array.prototype.forEach.call(deferredScripts, function (placeholder) {
        var activated = document.createElement('script');
        Array.prototype.slice.call(placeholder.attributes).forEach(function (attr) {
          if (attr.name === 'type') return;
          activated.setAttribute(attr.name, attr.value);
        });

        if (placeholder.src) {
          activated.src = placeholder.src;
        } else {
          activated.textContent = placeholder.textContent;
        }

        placeholder.parentNode.insertBefore(activated, placeholder.nextSibling);
        placeholder.parentNode.removeChild(placeholder);
      });
    }

    if (document.readyState === 'loading') document.addEventListener('DOMContentLoaded', startActivation);
    else startActivation();
  }

  function stateAccepted() { return localStorage.getItem(KEY) === 'yes'; }
  function stateRejected() { return localStorage.getItem(KEY) === 'no'; }
  function save(choice) { localStorage.setItem(KEY, choice ? 'yes' : 'no'); }

  function removeBanner() {
    var el = document.getElementById('cookie-consent');
    if (el && el.parentNode) el.parentNode.removeChild(el);
  }

  function showBanner() {
    if (document.getElementById('cookie-consent')) return;
    var bar = document.createElement('div');
    bar.id = 'cookie-consent';
    bar.setAttribute('role', 'dialog');
    bar.setAttribute('aria-live', 'polite');
    bar.style.cssText = [
      'position:fixed','left:0','right:0','bottom:0','z-index:1080',
      'background:#111','color:#fff','box-shadow:0 -6px 20px rgba(0,0,0,.3)'
    ].join(';');

    bar.innerHTML = '' +
      '<div style="max-width:1140px;margin:0 auto;padding:12px 16px;display:flex;gap:12px;align-items:center;flex-wrap:wrap">' +
        '<span style="font-size:14px;line-height:1.4;flex:1">We use cookies to improve your experience and analyze traffic.</span>' +
        '<a href="'+ (config.policyUrl || '#') +'" style="color:'+BRAND_SECONDARY+';text-decoration:underline;font-size:14px" target="_blank" rel="noopener">Learn more</a>' +
        '<button id="cc-reject" style="background:#333;color:#fff;border:0;border-radius:8px;padding:8px 12px;font-size:14px">Reject</button>' +
        '<button id="cc-accept" style="background:'+BRAND_PRIMARY+';color:#fff;border:0;border-radius:8px;padding:8px 12px;font-size:14px">Accept</button>' +
      '</div>';

    document.body.appendChild(bar);

    document.getElementById('cc-accept').addEventListener('click', function () {
      save(true); removeBanner(); activateAnalyticsScripts();
      window.dispatchEvent(new CustomEvent('cookie-consent:accepted'));
    });
    document.getElementById('cc-reject').addEventListener('click', function () {
      save(false); removeBanner();
      window.dispatchEvent(new CustomEvent('cookie-consent:rejected'));
    });
  }

  // Public API
  window.CookieConsent = {
    accept: function(){ save(true); removeBanner(); activateAnalyticsScripts(); },
    reject: function(){ save(false); removeBanner(); },
    reset: function(){ localStorage.removeItem(KEY); },
    config: config
  };

  // Boot
  if (stateAccepted()) {
    activateAnalyticsScripts();
  } else if (stateRejected()) {
    // do nothing
  } else {
    if (document.readyState === 'loading') document.addEventListener('DOMContentLoaded', showBanner);
    else showBanner();
  }
})();
</script>

<!--Start of Tawk.to Script-->
<script type="text/javascript">
var Tawk_API=Tawk_API||{}, Tawk_LoadStart=new Date();
(function(){
var s1=document.createElement("script"),s0=document.getElementsByTagName("script")[0];
s1.async=true;
s1.src='https://embed.tawk.to/68d289be2f2eec1925af0d28/1j5r6k4hi';
s1.charset='UTF-8';
s1.setAttribute('crossorigin','*');
s0.parentNode.insertBefore(s1,s0);
})();
</script>
<!--End of Tawk.to Script-->
